{% extends "base.html" %}

{% block title %}Upload Chat{% endblock %}

{% block content %}
<div class="flex justify-center items-center min-h-screen px-4">
    <div class="card p-4 sm:p-6 md:p-8 animate-fade-in w-full max-w-xs sm:max-w-sm md:max-w-md shadow-2xl">
        <h2 class="text-2xl font-semibold text-center mb-6">Upload WhatsApp Chat File</h2>
        <p class="text-sm text-gray-300 mb-4">Your chat data is processed locally and not stored on any server. Files are deleted after analysis for privacy.</p>
        <div class="bg-red-500 bg-opacity-20 border border-red-500 text-red-300 p-3 rounded-lg mb-4">
            <strong>Privacy Notice:</strong> Only upload chats with consent. Analysis uses AI but no data is shared externally.
        </div>
        <form action="{{ url_for('upload') }}" method="post" enctype="multipart/form-data" class="space-y-4" onsubmit="showLoading()">
            <div>
                        <label for="file" class="block text-sm font-medium mb-2">Select .txt or .zip file:</label>
                        <input type="file" name="file" id="file" accept=".txt,.zip" required class="w-full px-4 py-2 bg-gray-800 bg-opacity-50 text-white border border-gray-600 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-300">
            </div>
            <button type="submit" id="upload-btn" class="btn w-full text-white font-bold py-3 px-4 rounded-lg">Upload</button>
            <div id="loading" class="hidden flex justify-center items-center mt-4">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-white"></div>
                <span class="ml-2">Processing...</span>
            </div>
        </form>
        <script>
            function showLoading() {
                document.getElementById('upload-btn').classList.add('hidden');
                document.getElementById('loading').classList.remove('hidden');
            }
        </script>
    </div>
</div>
{% endblock %}